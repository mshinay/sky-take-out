<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.sky.mapper.OrderDetailMapper">
    <insert id="insertBatch" parameterType="java.util.List">
        insert into order_detail(name, image, order_id, dish_id, setmeal_id, dish_flavor, amount)
                        VALUES
            <foreach collection="detailList" separator="," item="orderDetail">
                (#{orderDetail.name},#{orderDetail.image},#{orderDetail.orderId},
                #{orderDetail.dishId},#{orderDetail.setmealId},#{orderDetail.dishFlavor},#{orderDetail.amount})
            </foreach>
    </insert>

    <select id="getSalesTop10" resultType="com.sky.dto.GoodsSalesDTO">
        select od.name as name,
               sum(od.number) as number
        from order_detail od
                 inner join orders o on od.order_id = o.id
        where o.order_time &gt;= #{beginTime}
          and o.order_time &lt; #{endTime}
          and o.status = #{status}
        group by od.name
        order by number desc
        limit 10
    </select>

</mapper>
